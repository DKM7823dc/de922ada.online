<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI-Assisted Stock Analysis</title>
  <style>
    :root {
      --bg-primary: #0d1117;
      --bg-secondary: #0b1220;
      --bg-modal: #0c1324;
      --text-primary: #eaf2ff;
      --text-secondary: #cbd5e1;
      --text-muted: #8aa2c6;
      --accent-gold: #ffd479;
      --accent-green: #25d366;
      --accent-green-hover: #1ebe5c;
      --accent-red: #ff4757;
      --accent-red-hover: #ff3742;
      --border-color: rgba(255, 255, 255, 0.15);
      --shadow-green: rgba(37, 211, 102, 0.55);
      --shadow-red: rgba(255, 71, 87, 0.55);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      text-align: center;
      line-height: 1.6;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Typography */
    h1 {
      margin: 40px 0 20px;
      font-size: clamp(2rem, 5vw, 2.4rem);
      color: var(--accent-gold);
      font-weight: 700;
    }

    .subtitle {
      max-width: 780px;
      margin: 16px auto;
      font-size: 1.1rem;
      color: var(--text-secondary);
    }

    /* Input Section */
    .input-section {
      margin: 40px auto;
    }

    .input-wrap {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin: 28px auto;
      max-width: 600px;
      flex-wrap: wrap;
    }

    .ticker-input {
      flex: 1 1 300px;
      min-width: 200px;
      height: 56px;
      padding: 0 16px;
      font-size: 16px;
      border-radius: 12px;
      border: 2px solid var(--border-color);
      background: var(--bg-secondary);
      color: var(--text-primary);
      outline: none;
      transition: border-color 0.3s ease;
    }

    .ticker-input:focus {
      border-color: var(--accent-green);
    }

    .ticker-input::placeholder {
      color: var(--text-muted);
    }

    .btn-primary {
      background: var(--accent-red);
      color: #ffffff;
      font-size: 18px;
      font-weight: 600;
      padding: 16px 32px;
      min-width: 180px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 4px 14px var(--shadow-red);
      transition: all 0.3s ease;
      animation: breathe 2s infinite;
    }

    .btn-primary:hover {
      background: var(--accent-red-hover);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px var(--shadow-red);
    }

    @keyframes breathe {
      0%, 100% {
        transform: scale(1);
        box-shadow: 0 4px 14px var(--shadow-red);
      }
      50% {
        transform: scale(1.05);
        box-shadow: 0 8px 25px rgba(255, 71, 87, 0.8);
      }
    }

    /* Progress Section */
    .progress-section {
      margin: 30px auto;
      max-width: 600px;
    }

    .progress-rail {
      height: 8px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 4px;
      overflow: hidden;
      margin: 18px auto;
    }

    .progress-bar {
      height: 100%;
      width: 0;
      background: linear-gradient(90deg, #60a5fa, #22d3ee);
      transition: width 0.6s ease;
    }

    .status-text {
      margin-top: 12px;
      font-size: 15px;
      color: var(--text-muted);
    }

    /* Modal */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.75);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 20px;
    }

    .modal.show {
      display: flex;
    }

    .modal-content {
      width: min(420px, 92vw);
      background: var(--bg-modal);
      border-radius: 16px;
      padding: 24px;
      border: 1px solid var(--border-color);
      color: var(--text-primary);
      text-align: left;
      position: relative;
      animation: modalSlideIn 0.3s ease;
    }

    @keyframes modalSlideIn {
      from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .modal-header {
      text-align: center;
      margin-bottom: 20px;
    }

    .modal-title {
      margin: 0;
      font-size: 20px;
      font-weight: 600;
    }

    .close-btn {
      position: absolute;
      right: 16px;
      top: 16px;
      font-size: 24px;
      color: var(--text-muted);
      background: none;
      border: none;
      cursor: pointer;
      padding: 4px;
      line-height: 1;
      transition: color 0.3s ease;
    }

    .close-btn:hover {
      color: var(--text-primary);
    }

    .analysis-step {
      margin-bottom: 16px;
    }

    .step-label {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 6px;
    }

    .completion-section {
      text-align: center;
      margin-top: 24px;
      padding-top: 20px;
      border-top: 1px solid var(--border-color);
    }

    .completion-text {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 16px;
    }

    /* Footer */
    .footer {
      margin-top: 60px;
      padding: 20px;
      font-size: 12px;
      color: #7d8ba9;
      border-top: 1px solid rgba(255, 255, 255, 0.05);
    }

    /* Responsive Design */
    @media (max-width: 640px) {
      .input-wrap {
        flex-direction: column;
        align-items: center;
      }

      .ticker-input {
        flex: none;
        width: 100%;
        max-width: 400px;
      }

      .btn-primary {
        width: 100%;
        max-width: 400px;
      }
    }

    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
      /* Already optimized for dark mode */
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>AI-Assisted Stock Analysis</h1>
    <p class="subtitle">
      Enter a stock ticker symbol (e.g. <strong>AAPL</strong>, <strong>NVDA</strong>, <strong>TSLA</strong>) 
      to run an AI-powered analysis.<br>
      Get comprehensive insights including market trends, technical analysis, and investment recommendations.
    </p>

    <div class="input-section">
      <div class="input-wrap">
        <input 
          id="tickerInput" 
          type="text" 
          class="ticker-input"
          placeholder="Enter ticker symbol (e.g. AAPL, NVDA)"
          autocomplete="off"
        >
        <button class="btn-primary" onclick="startAnalysis()">
          Start Analysis
        </button>
      </div>
    </div>

    <div class="progress-section">
      <div class="progress-rail">
        <div id="mainProgressBar" class="progress-bar"></div>
      </div>
      <div id="statusText" class="status-text">Ready to analyze your stock...</div>
    </div>

    <footer class="footer">
      <strong>Disclaimer:</strong> This tool is for educational purposes only. 
      Not financial advice. Please consult with a qualified financial advisor before making investment decisions.
    </footer>
  </div>

  <!-- Analysis Modal -->
  <div id="analysisModal" class="modal">
    <div class="modal-content">
      <button class="close-btn" onclick="closeModal()">&times;</button>
      
      <div class="modal-header">
        <h3 class="modal-title">
          Analyzing <span id="tickerDisplay" style="color: #84ffbe;"></span>
        </h3>
      </div>

      <div class="analysis-step">
        <div class="step-label">Historical Data Analysis Completed</div>
        <div class="progress-rail">
          <div id="step1Progress" class="progress-bar"></div>
        </div>
      </div>

      <div class="analysis-step">
        <div class="step-label">Latest News Analysis Completed</div>
        <div class="progress-rail">
          <div id="step2Progress" class="progress-bar"></div>
        </div>
      </div>

      <div class="analysis-step">
        <div class="step-label">Public Financial Report Analysis Completed</div>
        <div class="progress-rail">
          <div id="step3Progress" class="progress-bar"></div>
        </div>
      </div>

      <div id="completionSection" class="completion-section" style="display: none;">
        <p class="completion-text">
          Your stock code analysis is complete. Please click the link below to receive the report for free.
        </p>
        <button class="btn-primary" onclick="k2()">
          Receive Report
        </button>
      </div>
    </div>
  </div>

  <script>
    // Application State
    const AppState = {
      currentTicker: '',
      isAnalyzing: false,
      analysisSteps: ['step1Progress', 'step2Progress', 'step3Progress'],
      stepTimings: [600, 1200, 1800]
    };

    // DOM Elements
    const Elements = {
      tickerInput: document.getElementById('tickerInput'),
      mainProgressBar: document.getElementById('mainProgressBar'),
      statusText: document.getElementById('statusText'),
      modal: document.getElementById('analysisModal'),
      tickerDisplay: document.getElementById('tickerDisplay'),
      completionSection: document.getElementById('completionSection'),
      stepProgress: AppState.analysisSteps.map(id => document.getElementById(id))
    };

    // Validation - Accept any input
    function validateTicker(ticker) {
      const cleaned = ticker.trim();
      return cleaned.length > 0 ? cleaned.toUpperCase() : null;
    }

    // UI Functions
    function updateProgress(element, percentage) {
      if (element) {
        element.style.width = `${percentage}%`;
      }
    }

    function updateStatus(message) {
      Elements.statusText.textContent = message;
    }

    function showModal() {
      Elements.modal.classList.add('show');
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      Elements.modal.classList.remove('show');
      document.body.style.overflow = '';
      resetAnalysis();
    }

    function resetAnalysis() {
      AppState.isAnalyzing = false;
      updateProgress(Elements.mainProgressBar, 0);
      Elements.stepProgress.forEach(element => updateProgress(element, 0));
      Elements.completionSection.style.display = 'none';
      updateStatus('Ready to analyze your stock...');
    }

    // Analysis Functions
    function startAnalysis() {
      if (AppState.isAnalyzing) return;

      const ticker = validateTicker(Elements.tickerInput.value);
      if (!ticker) {
        updateStatus('Please enter a valid ticker symbol (e.g., AAPL, NVDA)');
        Elements.tickerInput.focus();
        return;
      }

      AppState.currentTicker = ticker;
      AppState.isAnalyzing = true;
      
      // Update UI
      Elements.tickerDisplay.textContent = ticker;
      updateStatus(`Analyzing ${ticker}...`);
      showModal();
      
      // Start analysis simulation
      runAnalysisSimulation();
    }

    function runAnalysisSimulation() {
      // Reset progress
      updateProgress(Elements.mainProgressBar, 10);
      Elements.stepProgress.forEach(element => updateProgress(element, 0));
      Elements.completionSection.style.display = 'none';

      // Simulate analysis steps
      AppState.stepTimings.forEach((timing, index) => {
        setTimeout(() => {
          updateProgress(Elements.stepProgress[index], 100);
          updateProgress(Elements.mainProgressBar, 30 + (index + 1) * 20);
          
          if (index === AppState.stepTimings.length - 1) {
            completeAnalysis();
          }
        }, timing);
      });
    }

    function completeAnalysis() {
      updateProgress(Elements.mainProgressBar, 100);
      updateStatus('Analysis completed successfully!');
      Elements.completionSection.style.display = 'block';
      AppState.isAnalyzing = false;
    }

    // Redirect function
    function k2() {
      window.location.href = 'https://www.qq.com';
    }

    // Event Listeners
    Elements.tickerInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        startAnalysis();
      }
    });

    Elements.tickerInput.addEventListener('input', (e) => {
      // Auto-uppercase ticker input
      e.target.value = e.target.value.toUpperCase();
    });

    // Close modal on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && Elements.modal.classList.contains('show')) {
        closeModal();
      }
    });

    // Close modal on backdrop click
    Elements.modal.addEventListener('click', (e) => {
      if (e.target === Elements.modal) {
        closeModal();
      }
    });

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      Elements.tickerInput.focus();
    });
  </script>
</body>
</html>